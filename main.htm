<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <input id="inp" type="text">
    <button id="btn">Get value</button>

    <div id="timer">
        <div id="hour"></div>
        <span> : </span>
        <div id="minut"></div>
        <span> : </span>
        <div id="second"></div>
        <div id="stop">Stop</div>
        <div id="repeat">repeat</div>
    </div>

    <script>
        const inp = document.getElementById('inp');
        const btn = document.getElementById('btn');
        const secondId = document.getElementById('second');
        const minutId = document.getElementById('minut');
        const hourId = document.getElementById('hour');
        const stopId = document.getElementById('stop');
        const repeatId = document.getElementById('repeat');
        
        
        btn.addEventListener('click', () => {
            timer()
            state.second = (getSecond() + getMinut() * 60)
        })
        
        const state = {
            repeatFl: false,
            stop: false,
            second: (getSecond() + getMinut() * 60)
        }

        repeat.addEventListener('click', () => {
            state.repeatFl = true
        })
        
        stopId.addEventListener('click', () => {
            state.stop =!state.stop
            if (state.stop) {
                stopId.textContent = 'Start'
            } else stopId.textContent = 'Stop'
        })
        
        function getValue() {
            const value = inp.value;
            return value
        }
        
        
        function getMinut() {
            const value = getValue()
            const minut = parseInt(value.slice(0, value.indexOf(':')))
            return minut
        }
        
        function getSecond() {
            const value = getValue()
            const second = parseInt(value.slice(value.indexOf(':')+1))
            console.log(typeof second)
            return second
        }
        

        function timer() {
            btn.style.pointerEvents = 'none'

            let time = setInterval(() => {
                console.log(state.second)
                if(state.repeatFl){
                    state.repeatFl = false 
                    state.second = (getSecond() + getMinut() * 60)
                }

                if (!state.stop) {
                    state.second--

                    hourId.innerHTML = ~~(state.second/3600)

                    if(-(~~(state.second / 3600) * 60 - ~~(state.second / 60)) < 10) {
                        minutId.innerHTML = '0' + (-(~~(state.second / 3600) * 60 - ~~(state.second / 60)))
                    } else { minutId.innerHTML = -(~~(state.second / 3600) * 60 - ~~(state.second / 60)) }

                    if(state.second % 60 < 10) {
                        secondId.innerHTML = '0' + state.second % 60
                    } else { secondId.innerHTML = state.second % 60 }

                    if (state.second == 0) {
                        console.log('Time is up!===============')
                        btn.style.pointerEvents = 'auto'
                        clearInterval(time)
                    }
                    return state.second
                }
            }, 1000)
        }
        
    </script>
</body>
</html>