<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <input id="inp" type="text">
    <button id="btn">Get value</button>

    <div id="timer">
        <div id="hour"></div>
        <span> : </span>
        <div id="minut"></div>
        <span> : </span>
        <div id="second"></div>
        <div id="stop">Stop</div>
        <div id="repeat">repeat</div>
    </div>

    <script>
        const inp = document.getElementById('inp');
        const btn = document.getElementById('btn');
        const secondId = document.getElementById('second');
        const minutId = document.getElementById('minut');
        const hourId = document.getElementById('hour');
        const stopId = document.getElementById('stop');
        const repeatId = document.getElementById('repeat');
        let repeatFl = false
        let stop = false
        btn.addEventListener('click', () => {
            timer()
        })
        
        repeat.addEventListener('click', () => {
            repeatFl = true
        })

        stopId.addEventListener('click', () => {
            stop =!stop
            if (stop) {
                stopId.textContent = 'Start'
            } else stopId.textContent = 'Stop'
        })
        
        function getValue() {
            const value = inp.value;
            return value
        }
        
        function getMinut() {
            const value = getValue()
            const minut = parseInt(value.slice(0, value.indexOf(':')))
            return minut
        }

        function getSecond() {
            const value = getValue()
            const second = parseInt(value.slice(value.indexOf(':')+1))
            return second
        }

        function timer() {
            let minut = getMinut()
            let second = getSecond()
            btn.style.pointerEvents = 'none'

            let time = setInterval(() => {
                if(repeatFl){
                    repeatFl = false 
                    minut = getMinut()
                    second = getSecond()
                }

                if (repeatFl && stop) {
                    repeatFl = false
                    minut = getMinut()
                    second = getSecond()

                    if (minut - (~~(minut / 60) * 60) < 10) {
                        minutId.innerHTML = '0' + (minut - ~~(minut / 60) * 60)
                    } else minutId.innerHTML = minut - ~~(minut / 60) * 60

                    if (second < 10) {
                        secondId.innerHTML = '0' + second
                    } else secondId.innerHTML = second

                    hourId.innerHTML = ~~(minut / 60)
                }

                if (!stop) {
                    if (minut - (~~(minut / 60) * 60) < 10) {
                        minutId.innerHTML = '0' + (minut - ~~(minut / 60) * 60)
                    } else minutId.innerHTML = minut - ~~(minut / 60) * 60

                    if (second < 10) {
                        secondId.innerHTML = '0' + second
                    } else secondId.innerHTML = second

                    hourId.innerHTML = ~~(minut/60)

                    second--
                    if (second == 0) {
                        if (minut == 0 && second == 0) {
                            console.log('Time is up!===============')
                            btn.style.pointerEvents = 'auto'
                            clearInterval(time)
                        } else {
                            minut--;
                            second = 59;
                        }

                    }
                    return second
                }}, 1000)
            }
        
    </script>
</body>
</html>